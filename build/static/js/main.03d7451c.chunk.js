(this["webpackJsonpbookmark-app"]=this["webpackJsonpbookmark-app"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),o=n.n(a),i=n(19),c=n.n(i),s=n(9),l=(n(28),n(21)),d=n(7),u=n(8),h=n(11),j=n(10),b=n(2),m=o.a.createContext({bookmarks:[],addBookmark:function(){},deleteBookmark:function(){},updateBookmark:function(){}}),k="https://tranquil-basin-58871.herokuapp.com",p="/ipTMHeOqqrI7i8Rssm/z8MHTxgb7LamV7LpfXu",O=(n(29),function(){return Object(r.jsx)("span",{className:"AddBookmark__required",children:"*"})}),x=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={error:null},e.handleSubmit=function(t){t.preventDefault();var n=t.target,r=n.title,a=n.url,o=n.description,i=n.rating,c={title:r.value,url:a.value,description:o.value,rating:i.value};e.setState({error:null}),fetch(k,{method:"POST",body:JSON.stringify(c),headers:{"content-type":"application/json",authorization:"bearer ".concat(p)}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(t){r.value="",a.value="",o.value="",i.value="",e.context.addBookmark(t),e.props.history.push("/")})).catch((function(t){console.error(t),e.setState({error:t})}))},e.handleClickCancel=function(){e.props.history.push("/")},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.error;return Object(r.jsxs)("section",{className:"AddBookmark",children:[Object(r.jsx)("h2",{children:"Create a Bookmark"}),Object(r.jsxs)("form",{className:"AddBookmark__form",onSubmit:this.handleSubmit,children:[Object(r.jsx)("div",{className:"AddBookmark__error",role:"alert",children:e&&Object(r.jsx)("p",{children:e.message})}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{htmlFor:"title",children:["Title"," ",Object(r.jsx)(O,{})]}),Object(r.jsx)("input",{type:"text",name:"title",id:"title",placeholder:"Great Website!",required:!0})]}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{htmlFor:"url",children:["URL"," ",Object(r.jsx)(O,{})]}),Object(r.jsx)("input",{type:"url",name:"url",id:"url",placeholder:"https://www.great-website.com/",required:!0})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"description",children:"Description"}),Object(r.jsx)("textarea",{name:"description",id:"description"})]}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{htmlFor:"rating",children:["Rating"," ",Object(r.jsx)(O,{})]}),Object(r.jsx)("input",{type:"number",name:"rating",id:"rating",defaultValue:"1",min:"1",max:"5",required:!0})]}),Object(r.jsxs)("div",{className:"AddBookmark__buttons",children:[Object(r.jsx)("button",{type:"button",onClick:this.handleClickCancel,children:"Cancel"})," ",Object(r.jsx)("button",{type:"submit",children:"Save"})]})]})]})}}]),n}(a.Component);x.contextType=m;var f=x,v=(n(30),function(){return Object(r.jsx)("span",{className:"EditBookmark__required",children:"*"})}),g=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={error:null,id:"",title:"",url:"",desciption:"",rating:1},e.handleChangeTitle=function(t){e.setState({title:t.target.value})},e.handleChangeUrl=function(t){e.setState({url:t.target.value})},e.handleChangeDescription=function(t){e.setState({description:t.target.value})},e.handleChangeRating=function(t){e.setState({rating:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var n=e.props.match.params.bookmarkId,r=e.state,a={id:r.id,title:r.title,url:r.url,description:r.description,rating:r.rating};fetch(k+"/".concat(n),{method:"PATCH",body:JSON.stringify(a),headers:{"content-type":"application/json",authorization:"Bearer ".concat(p)}}).then((function(e){if(!e.ok)return e.json().then((function(e){return Promise.reject(e)}))})).then((function(){e.resetFields(a),e.context.updateBookmark(a),e.props.history.push("/")})).catch((function(t){console.error(t),e.setState({error:t})}))},e.resetFields=function(t){e.setState({id:t.id||"",title:t.title||"",url:t.url||"",description:t.description||"",rating:t.rating||""})},e.handleClickCancel=function(){e.props.history.push("/")},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.bookmarkId;fetch(k+"".concat(t),{method:"GET",headers:{authorization:"Bearer ".concat(p)}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(t){e.setState({id:t.id,title:t.title,url:t.url,desciption:t.desciption,rating:t.rating})})).catch((function(t){console.error(t),e.setState({error:t})}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.title,a=e.url,o=e.description,i=e.rating;return Object(r.jsxs)("section",{className:"EditBookmark",children:[Object(r.jsx)("h2",{children:"Edit bookmark"}),Object(r.jsxs)("form",{className:"EditBookmark__form",onSubmit:this.handleSubmit,children:[Object(r.jsx)("div",{className:"EditBookmark__error",role:"alert",children:t&&Object(r.jsx)("p",{children:t.message})}),Object(r.jsx)("input",{type:"hidden",name:"id"}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{htmlFor:"title",children:["Title"," ",Object(r.jsx)(v,{})]}),Object(r.jsx)("input",{type:"text",name:"title",id:"title",placeholder:"Great website!",required:!0,value:n,onChange:this.handleChangeTitle})]}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{htmlFor:"url",children:["URL"," ",Object(r.jsx)(v,{})]}),Object(r.jsx)("input",{type:"url",name:"url",id:"url",placeholder:"https://www.great-website.com/",required:!0,value:a,onChange:this.handleChangeUrl})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"description",children:"Description"}),Object(r.jsx)("textarea",{name:"description",id:"description",value:o,onChange:this.handleChangeDescription})]}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("label",{htmlFor:"rating",children:["Rating"," ",Object(r.jsx)(v,{})]}),Object(r.jsx)("input",{type:"number",name:"rating",id:"rating",min:"1",max:"5",required:!0,value:i,onChange:this.handleChangeRating})]}),Object(r.jsxs)("div",{className:"EditBookmark__buttons",children:[Object(r.jsx)("button",{type:"button",onClick:this.handleClickCancel,children:"Cancel"})," ",Object(r.jsx)("button",{type:"submit",children:"Save"})]})]})]})}}]),n}(a.Component);g.contextType=m;var B=g,y=n(22);n(31);function C(e){var t=[0,0,0,0,0].map((function(t,n){return n<e.value?Object(r.jsx)("span",{children:" \u2605 "},n):Object(r.jsx)("span",{children:" \u2606 "},n)}));return Object(r.jsx)("div",{className:"rating",children:t})}n(32);function _(e){return Object(r.jsx)(m.Consumer,{children:function(t){return Object(r.jsxs)("li",{className:"BookmarkItem",children:[Object(r.jsxs)("div",{className:"BookmarkItem__row",children:[Object(r.jsx)("h3",{className:"BookmarkItem__title",children:Object(r.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.title})}),Object(r.jsx)(C,{value:e.rating})]}),Object(r.jsx)("p",{className:"BookmarkItem__description",children:e.description}),Object(r.jsxs)("div",{className:"BookmarkItem__buttons",children:[Object(r.jsx)(s.b,{to:"/edit/".concat(e.id),children:"Edit"})," ",Object(r.jsx)("button",{className:"BookmarkItem__description",onClick:function(){return n=e.id,r=t.deleteBookmark,void fetch(k+"/".concat(n),{method:"DELETE",headers:{"content-type":"application/json",authorization:"bearer ".concat(p)}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){r(n)})).catch((function(e){console.error(e)}));var n,r},children:"Delete"})]})]})}})}_.defaultProps={onClickDelete:function(){}};n(38);var S=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.context.bookmarks;return Object(r.jsxs)("section",{className:"BookmarkList",children:[Object(r.jsx)("h2",{children:"Your Bookmarks"}),Object(r.jsx)("ul",{className:"BookmarkList__list","aria-live":"polite",children:e.map((function(e){return Object(r.jsx)(_,Object(y.a)({},e),e.id)}))})]})}}]),n}(a.Component);S.defaultProps={bookmarks:[]},S.contextType=m;var N=S;function w(e){return Object(r.jsxs)("nav",{className:"Nav",children:[Object(r.jsx)(s.b,{to:"/",children:"Bookmark List"})," ",Object(r.jsx)(s.b,{to:"/add-bookmark",children:"Add Bookmark"})]})}n(39);var T=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={bookmarks:[],error:null},e.setBookmarks=function(t){e.setState({bookmarks:t,error:null})},e.addBookmark=function(t){e.setState({bookmarks:[].concat(Object(l.a)(e.state.bookmarks),[t])})},e.deleteBookmark=function(t){var n=e.state.bookmarks.filter((function(e){return e.id!==t}));e.setState({bookmarks:n})},e.updateBookmark=function(t){e.setState({bookmarks:e.state.bookmarks.map((function(e){return e.id!==t.id?e:t}))})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch(k,{method:"GET",headers:{"content-type":"applicaton/json",Authorization:"Bearer ".concat(p)}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then(this.setBookmarks).catch((function(t){console.error(t),e.setState({error:t})}))}},{key:"render",value:function(){var e={bookmarks:this.state.bookmarks,addBookmark:this.addBookmark,deleteBookmark:this.deleteBookmark,updateBookmark:this.updateBookmark};return Object(r.jsxs)("main",{className:"App",children:[Object(r.jsx)("h1",{children:"Bookmarks!"}),Object(r.jsxs)(m.Provider,{value:e,children:[Object(r.jsx)(w,{}),Object(r.jsxs)("div",{className:"content","aria-live":"polite",children:[Object(r.jsx)(b.a,{exact:!0,path:"/",component:N}),Object(r.jsx)(b.a,{path:"/add-bookmark",component:f}),Object(r.jsx)(b.a,{path:"/edit/:bookmarkId",component:B})]})]})]})}}]),n}(a.Component);c.a.render(Object(r.jsx)(s.a,{children:Object(r.jsx)(T,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.03d7451c.chunk.js.map